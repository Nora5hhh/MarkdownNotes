# 反应堆模型（libevent核心思想实现）

#### libevent定义

它是一个**异步事件处理软件库**，它提供了一组应用程序编程接口(API)，允许开发者为事件注册回调函数（**回调函数Callback是指被主函数调用运算后会返回主函数**）。libevent在设计上用来**替代**很多**事件驱动网络服务器**自行实现的**事件循环框架**的，用来**取代网络服务器所使用的事件循环检查框架**。

#### 优点

跨平台、精炼-epoll、回调

![反应堆模型](C:\Users\86132\Desktop\反应堆模型.png)上面是反应堆模型实现步骤。

#### 心跳检测机制

##### 定义

在TCP网络通信中，经常出现客户端与服务器间的非正常断开，需要实时检测查询连接状态，常用方法就是程序中加入心跳机制。

##### 步骤

1. 客户端隔一个时间间隔发送一个探测包给服务器；
2. 客户端发包时同时启动一个超时定时器；
3. 服务器在时间内回应了包并且客户端收到了，说明服务器正常，删除超时定时器；
4. 若客户端超时定时器超时仍然没有收到应答包，说明服务器挂了。



#### 乒乓包

##### 定义

在检测连接状态的基础上还可以传送简单的数据。