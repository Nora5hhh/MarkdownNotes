# 边沿触发与水平触发

#### 边沿触发

##### 定义

只有在缓冲区**增加数据**的那一刻才会触发。比如：

![](C:\Users\86132\AppData\Roaming\Typora\typora-user-images\1583310797610.png)

实际情况下边沿触发更好，因为有时候并不需要读取完缓冲区所有的数据。因此一般设置一个每次读取的大小，若有时发送的数据小于这个大小，会一直阻塞在那里，出现了死锁现象。因此常需要配合**非阻塞状态**一起使用。

当ET模式与线程池方式联合时，一个socket可能会同时被多个线程处理，此时若对socket注册了EPOLLONESHOT事件，操作系统最多触发其上注册的一个可读、可写或异常事件，且只触发一次。想要下次再触发就必须使用epoll_ctl重置该描述符上注册的事件。

![1583415794877](C:\Users\86132\AppData\Roaming\Typora\typora-user-images\1583415794877.png)

![1583415774545](C:\Users\86132\AppData\Roaming\Typora\typora-user-images\1583415774545.png)

#### 非阻塞修改（改变文件属性）方法

1. fcntl（将属性设置为O_NONBLOCK）
2. open（对于socket套接字不适用）



#### 水平触发

##### 定义

只要缓冲区有数据就会一直触发（默认）。